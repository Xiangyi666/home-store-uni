{"version":3,"file":"packing-in.js","sources":["pages/packing-in/packing-in.nvue","pages/packing-in/packing-in.nvue?type=page"],"sourcesContent":["<template>\n\t<view class=\"main\">\n\t\t<view class=\"scan-area\">\n\t\t\t<image class=\"scan-img\" src=\"/static/扫码.png\" />\n\t\t\t<text class=\"tip-title\">上传购物小票快速录入</text>\n\t\t</view>\n\t\t<view class=\"family-line\">\n\t   <picker \n\t      mode=\"selector\" \n\t      :range=\"homeOptions\" \n\t      :value=\"selectedName\" \n\t      @change=\"homeSwitch\"\n\t\t\t\trange-key=\"name\"\n\t    >\n\t      <view class=\"picker\">\n\t        当前选择：{{ selectedName }}\n\t      </view>\n\t    </picker>\n\t\t\t</view>\n\t\t<text class=\"title\">商品信息</text>\n\t\t<view class=\"uni-input-wrapper\">\n\t\t    <input class=\"uni-input\"  v-model=\"goodsName\" placeholder=\"请输入\" />\n\t\t\t\t<input class=\"uni-input\"  v-model=\"supplier\" placeholder=\"输入来源\"></input class=\"uni-input\">\n\t\t\t\t<input class=\"uni-input\"  v-model=\"tagsNameStr\" placeholder=\"输入品类或从下方选择\"></input class=\"uni-input\">\n\t\t\t\t<view >\n\t\t\t\t\t<uni-data-checkbox mode=\"tag\"  :multiple=\"false\" v-model=\"tagStr\" :localdata=\"tags\">\n\t\t\t\t\t</uni-data-checkbox>\n\t\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"qu-area\">\n\t\t\t<view style=\"width:48%\">\n\t\t\t\t<text class=\"title-2\">数量</text>\n\t\t\t\t<view class=\"flex-line\">\n\t\t\t\t<input class=\"uni-input uni-input-number\"  v-model=\"quantity\"></input>\n\t\t\t\t<view class=\"uni-select-unit\">\n\t\t\t\t\t<uni-data-select\n\t\t\t\t\t\tv-model=\"unit\"\n\t\t\t\t\t\t:localdata=\"unitRange\"\n\t\t\t\t\t\t@change=\"changeUnit\"\n\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t:clear=\"false\"\n\t\t\t\t\t></uni-data-select>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view style=\"width:45%\">\n\t\t\t\t<text class=\"title-2\">预计多久过期</text>\n\t\t\t\t<uni-easyinput class=\"uni-input\"  v-model=\"shelfLifeDays\" :clearable=\"false\" placeholder=\"请输入天数\" >\n\t\t\t\t\t<template #right>\n\t\t\t\t\t\t\t<text style=\"font-size:32rpx;margin-right:24rpx\">天</text>\n\t\t\t\t\t\t</template>\n\t\t\t\t</uni-easyinput>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"addStore-areta\">\n\t\t\t<text class=\"title\">存放位置</text>\n\t\t\t<view class=\"store-checks\">\n\t\t\t\t<uni-data-checkbox  mode=\"tag\" class=\"store-tag\"  :multiple=\"false\" v-model=\"storeId\" :localdata=\"storages\">\n\t\t\t\t</uni-data-checkbox>\n\t\t\t</view>\n\t\t\t<view class=\"add-tag\"><text>+新</text></view>\n\t\t</view>\n\t\t<view class=\"submit-area\">\n\t\t\t<button class=\"btn\" @click=\"doSubmit\" type=\"primary\"> 确认入库</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport http from '@/utils/http.js';\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tquantity: 600,\n\t\t\t\tgoodsName: '玉米',\n\t\t\t\tcurrentFamily: '',\n\t\t\t\thomeOptions:[],\n\t\t\t\tselectedId: '',\n\t\t\t\tselectedName: '',\n\t\t\t\tshelfLifeDays: 27,\n\t\t\t\ttagsNameStr: '',\n\t\t\t\texpireDate: Date.now(),\n\t\t\t\ttagStr: [],\n\t\t\t\tunitRange: [{value: 'g', text: 'g'}, {value: '个', text: '个'}, {value: 'ml', text: 'ml'}],\n\t\t\t\tunit:'g',\n\t\t\t\tstoreId: '',\n\t\t\t\tsupplier: '超市',\n\t\t\t\tstorages:[],\n\t\t\t\ttags: [{value:'食品', text:'食品'},{value:'饮料', text:'饮料'}],\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\ttagStr(v) {\n\t\t\t\tthis.tagsNameStr = v\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t},\n\t\tasync onShow() {\n\t\t\tawait this.getFamilys()\n\t\t\tthis.getStores()\n\t\t},\n\t\tmethods: {\n\t\t\thomeSwitch(v){\n\t\t\t\tconsole.log('======switch',v.detail?.value)\n\t\t\t\tconst index = v.detail?.value\n\t\t\t\tconst obj = this.homeOptions[index]\n\t\t\t\tthis.selectedName = obj.name\n\t\t\t\tthis.selectedId = obj.id\n\t\t\t},\n\t\t\tmock() {\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '/pages/homes/homes'\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync getFamilys() {\n\t\t\t\tthis.homeOptions =[]\n\t\t\t\tconst res = await http.get('/families/getAll')\n\t\t\t\tconsole.log('familys-----', res)\n\t\t\t\tthis.homeOptions = res.data\n\t\t\t\tif(this.homeOptions.length == 0) {\n\t\t\t\t\tconsole.log('re-----')\n\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\turl: '/pages/homes/homes'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.selectedName = res?.data[0].name\n\t\t\t\tthis.selectedId = res?.data[0].id\n\t\t\t},\n\t\t\tasync getStores() {\n\t\t\t\n\t\t\t\tconst res = await http.post('/warehouses/getAllByFamily',{\n\t\t\t\t\tfamilyId: this.selectedId\n\t\t\t\t})\n\t\t\t\tconsole.log('stores---', res)\n\t\t\t\tif(res?.data.length) {\n\t\t\t\t\tthis.storages = []\n\t\t\t\t\tres.data.map(item => {\n\t\t\t\t\t\tthis.storages.push({\n\t\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\t\ttext:item.name\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync stockIn() {\n\t\t\t\tconst res = await http.post('/warehouses/stock-in',{\n\t\t\t\t\tingredientName: this.goodsName,\n\t\t\t\t\tunit: this.unit,\n\t\t\t\t\twarehouseId: this.storeId,\n\t\t\t\t\tshelfLifeDays: this.shelfLifeDays,\n\t\t\t\t\tquantity: this.quantity,\n\t\t\t\t\tsupplier: this.supplier\n\t\t\t\t})\n\t\t\t\tconsole.log('---res', res)\n\t\t\t},\n\t\t\tchangeUnit() {},\n\t\t\taddTag() {\n\t\t\t\tthis.tags.push({value:this.tagsNameStr, text:this.tagsNameStr})\n\t\t\t},\n\t\t\tdoSubmit() {\n\t\t\t\tconsole.log(this.tagStr, this.goodsName,this.storeId, this.tagsNameStr, this.quantity, this.supplier,this.shelfLifeDays)\n\t\t\t\tthis.stockIn()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"stylus\">\n\t.main{\n\t\tpadding: 32rpx;\n\t\toverflow-y: scroll;\n\t\tpadding-bottom:170rpx;\n\t}\n\t\n\t.tip-title{\n\t\tmargin: 8rpx 0;\n\t\tcolor:#666;\n\t\tmargin-top:8px;\n\t}\n\t.flex-line{\n\t\tdisplay: flex\n\t\tflex-direction: row\n\t\tjustify-content: center\n\t\talign-items: center\n\t}\n\t.uni-input-wrapper{\n\t\tmargin-top: 16rpx;\n\t}\n\t.title{\n\t\tfont-weight: bold;\n\t\tmargin-top: 40rpx;\n\t\tfont-size:32rpx;\n\t}\n\t.title-2{\n\t\tmargin-top: 24rpx;\n\t\tfont-size: 32rpx;\n\t}\n\t.qu-area{\n\t\twidth:100%;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between\n\t\t.title{\n\t\t\tmargin-bottom:12rpx\n\t\t}\n\t}\n\t.uni-input{\n\t\tmargin: 8rpx 0;\n\t\tpadding: 15rpx 25rpx;\n\t}\n\t>>> .uni-easyinput {\n\t\tmargin-top: 8rpx !important\n}\n>>> .uni-date{\n\tmargin-top:12rpx\n}\n\t.submit-area{\n\t\tposition: fixed;\n\t\tborder-top: 1px solid #E8E8E8;\n\t\tbackground: #fff;\n\t\tbottom:0rpx;\n\t\tleft:0;\n\t\tpadding: 12px 24px;\n\t\twidth:100%;\n\t}\t\n\t>>> .uni-data-checklist .checklist-group .checklist-box.is--tag {\n\t\tborder: none !important;\n\t\tborder-radius: 24rpx !important\n\t}\n\t.btn{\n\t\tbackground: #1890FF;\n\t\tborder-radius: 44rpx;\n\t}\n\t.uni-input-number{\n\t\twidth: 160rpx;\n\t\theight:74rpx\n\t\tpadding: 0rpx 25rpx\n\t\tmargin-right: 12rpx\n\t}\n\t>>> .uni-icons{\n\t\tcolor: #1890FF !important\n\t\tmargin-left: -28rpx;\n\t}\n\t>>> .uni-date-x .icon-calendar {\n\t\tmargin-right: 24rpx\n}\n\t.uni-select-unit{\n\t\twidth:94rpx !important\n\t}\n\t.store-checks{\n\t\tmargin-top:24rpx\n\t\tdisplay: flex\n\t\tflex-direction: row\n\t}\n\t.scan-area{\n\t\tmargin-top: 24rpx;\n\t\tdisplay: flex;\n\t\twidth:100%;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t}\n\t>>> .uni-data-checklist .checklist-group .checklist-box.is--tag.is-checked {\n\t\t    background-color: #2979ff !important\n\t}\n\t.store-checks >>>.uni-data-checklist .checklist-group .checklist-box.is--tag{\n\t\tbackground: #EFF6FF\n\t\tpadding:20rpx 24rpx;\n\t\talign-items: center\n\t\tjustify-content: center\n\t\tborder-radius: 34rpx !important\n\t}\n\t.add-tag{\n\t\tbackground: #fff;\n\t\tborder:1rpx #e8e8e8 solid\n\t\tpadding:10rpx 24rpx;\n\t\tmargin: 10rpx 0\n\t\twidth: 120rpx;\n\t\tborder-radius: 34rpx !important\n\t}\n\t.scan-img{\n\t\twidth: 136rpx;\n\t\theight: 136rpx;\n\t}\n</style>\n","import MiniProgramPage from '/Users/amh/Documents/HBuilderProjects/home-store-uni/pages/packing-in/packing-in.nvue'\nwx.createPage(MiniProgramPage)"],"names":["uni","http"],"mappings":"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"}