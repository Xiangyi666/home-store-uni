{"version":3,"file":"storage.js","sources":["pages/storage/storage.vue","pages/storage/storage.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"main\">\r\n\t\t<button @click=\"getAllGoods\">刷新test</button>\r\n\t\t<view v-for=\"(item, index) in goodsList\" :key=\"index\" class=\"product-card\">\r\n\t\t\t<view class=\"accent-line\"></view>\r\n\t\t\t<view class=\"card-content\">\r\n\t\t\t\t<div class=\"product-name\">\r\n\t\t\t\t\t{{item.itemName}}\n\t\t\t\t\t<span class=\"tag red\" v-if=\"item.expireDays<0\">已经过期</span>\r\n\t\t\t\t\t<span class=\"tag orange\" v-else-if=\"item.expireDays<=3\">临期</span>\n\t\t\t\t\t<span class=\"tag green\" v-else-if=\"item.expireDays>0 && item.expireDays <= 30\"> {{item.expireDays}}天内过期</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"product-stock\">\r\n\t\t\t\t\t<span class=\"stock-label\">库存</span>\r\n\t\t\t\t\t<span class=\"stock-value\">3件</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"expiry-date\">\r\n\t\t\t\t\t<span>到期日期</span>\r\n\t\t\t\t\t<span>2025-11-05</span>\r\n\t\t\t\t</div>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport http from '@/utils/http.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\twarehouses: [],\r\n\t\t\t\tgoodsList: [],\r\n\t\t\t\tcolorMap: {\r\n\t\t\t\t\t3: '#F94D50',\r\n\t\t\t\t\t7: '#FA8C16',\r\n\t\t\t\t\t10: '#52C41B'\r\n\t\t\t\t},\r\n\t\t\t\tbgColorMap: {\r\n\t\t\t\t\t3: '#FFF6F7',\r\n\t\t\t\t\t7: '#FFFAF5'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getAllGoods()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetDaysUntil(targetDate) {\r\n\t\t\t\t// 创建今日日期对象，并设置为零点以确保计算准确\r\n\t\t\t\tconst today = new Date();\r\n\t\t\t\ttoday.setHours(0, 0, 0, 0);\r\n\r\n\t\t\t\t// 创建目标日期对象\r\n\t\t\t\tconst target = new Date(targetDate);\r\n\t\t\t\ttarget.setHours(0, 0, 0, 0);\r\n\r\n\t\t\t\t// 计算毫秒差\r\n\t\t\t\tconst timeDiff = target.getTime() - today.getTime();\r\n\r\n\t\t\t\t// 转换为天数并返回\r\n\t\t\t\tconst daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));\r\n\t\t\t\treturn daysDiff;\r\n\t\t\t},\r\n\t\t\tasync getAllGoods() {\r\n\t\t\t\tconst res = await http.post('/warehouses/family/getAllGoods', {\r\n\t\t\t\t\tfamilyId: 9\r\n\t\t\t\t})\r\n\t\t\t\tthis.goodsList = res.data\r\n\t\t\t\tthis.goodsList.map(item => {\r\n\t\t\t\t\titem.expireDays = this.getDaysUntil(item.expiryDate)\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(this.goodsList[0])\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n\t.main {\r\n\t\tpadding: 24rpx\r\n\t}\r\n\r\n\t.product-card {\r\n\t\twidth: 100%;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbox-shadow: 0 4rpx 15rpx rgba(0, 0, 0, 0.08);\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\ttransition: transform 0.3s ease, box-shadow 0.3s ease;\n\t\tmargin: 16rpx 0 \r\n\t}\r\n\r\n\t.accent-line {\r\n\t\twidth: 8rpx;\r\n\t\tbackground: linear-gradient(to bottom, #4CAF50, #8BC34A);\r\n\t}\r\n\r\n\t.card-content {\r\n\t\tposition: relative;\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx;\r\n\t\tpadding-left: 40rpx\r\n\t}\r\n\r\n\t.product-name {\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 12px;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\r\n\t.product-spec {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding-bottom: 15px;\r\n\t\tborder-bottom: 1px dashed #e0e0e0;\r\n\t}\r\n\r\n\t.spec-label {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.spec-value {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.product-stock {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: left;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.stock-label {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t\tmargin-right: 12rpx\r\n\t}\r\n\r\n\t.stock-value {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #2563EB;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.expiry-date {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: left;\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tpadding: 4rpx 16rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tposition: absolute; \n\t\ttop: 12rpx ;\n\t\tright: 12rpx;\n\r\n\t}\n\t.tag.green {\n\t\tbackground-color: #E8F5E9;\n\t\tcolor: #4CAF50;\n\t}\n\t.tag.orange{\n\t\tbackground-color: #FFFAF5;\n\t\tcolor: #FA8C16;\n\t}\n\t.tag.red{\n\t\tbackground-color: #FFF6F7;\n\t\tcolor: #F94D50;\n\t}\r\n</style>","import MiniProgramPage from '/Users/amh/Documents/HBuilderProjects/home-store-uni/pages/storage/storage.vue'\nwx.createPage(MiniProgramPage)"],"names":["http","uni"],"mappings":";;;AA4BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY,CAAE;AAAA,MACd,WAAW,CAAE;AAAA,MACb,UAAU;AAAA,QACT,GAAG;AAAA,QACH,GAAG;AAAA,QACH,IAAI;AAAA,MACJ;AAAA,MACD,YAAY;AAAA,QACX,GAAG;AAAA,QACH,GAAG;AAAA,MACJ;AAAA,IACD;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,YAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAAA,IACR,aAAa,YAAY;AAExB,YAAM,QAAQ,oBAAI;AAClB,YAAM,SAAS,GAAG,GAAG,GAAG,CAAC;AAGzB,YAAM,SAAS,IAAI,KAAK,UAAU;AAClC,aAAO,SAAS,GAAG,GAAG,GAAG,CAAC;AAG1B,YAAM,WAAW,OAAO,YAAY,MAAM,QAAO;AAGjD,YAAM,WAAW,KAAK,MAAM,YAAY,MAAO,KAAK,KAAK,GAAG;AAC5D,aAAO;AAAA,IACP;AAAA,IACD,MAAM,cAAc;AACnB,YAAM,MAAM,MAAMA,gBAAK,KAAK,kCAAkC;AAAA,QAC7D,UAAU;AAAA,OACV;AACD,WAAK,YAAY,IAAI;AACrB,WAAK,UAAU,IAAI,UAAQ;AAC1B,aAAK,aAAa,KAAK,aAAa,KAAK,UAAU;AAAA,OACnD;AACDC,oBAAA,MAAA,MAAA,OAAA,mCAAY,KAAK,UAAU,CAAC,CAAC;AAAA,IAC9B;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;AC1ED,GAAG,WAAW,eAAe;"}